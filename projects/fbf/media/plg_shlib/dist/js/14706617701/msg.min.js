/*! Copyright Weeblr llc 2016 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(e,o,n,s){"use strict;";function t(e){var o=s("#"+e),n=s(o.parent());o.slideUp(200,function(){o.remove();var e=n.children().length;e||n.parent().hide()})}function r(e){e.removeClass("wbl-spin").text("Error").addClass("wb-clr-alert")}function i(e){var o=e.data("element-id"),n=e.data("token"),i={uid:o};i[n]=1;s.post("index.php?option=com_ajax&plugin=shlib&method=removeMsg&format=json",i).done(function(n,s,i){try{"object"!=typeof n&&(n=JSON.parse(n)),"object"==typeof n?n.success?t(o):(console.log("ShLib: Ajax error: "+n.message),r(e)):console.log("wbLib: ajax error: no object in return")}catch(l){console.log("wbLib: ajax error decoding request response: "+l.message),console.debug(n),console.debug(l)}}).fail(function(o,n,s){console.log("wbLib: ajax error: "+n),console.debug(s),r(e)})}function l(e,o){var n=s(this),t=n.attr("id"),r=s("#wbl-msg-body-"+t);0==r.is(":visible")?(r.addClass("wbl-body-visible"),r.slideDown(300)):(r.slideUp(300),r.removeClass("wbl-body-visible"))}function c(e,o){var n=s(this);return n.html("x").addClass("wbl-spin"),i(n),!1}function a(){s(".wbl-msg-button-close").click(c),s(".wbl-container-msg-one-toggle").click(l)}function b(){try{a()}catch(e){console.log("Error setting up message center: "+e.message)}}return s(n).ready(b),e.shlib=e.shlib||{},e.shlib.msgCenter={refreshActions:function(){a()}},e}(window.weeblrApp=window.weeblrApp||{},window,document,jQuery);
